{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/img/error.svg","../src/main.js"],"sourcesContent":["// function for render pictures\nexport { createMarkup, resetMarkup, addMarkupNew };\nconst gallery = document.querySelector('.gallery');\n\nfunction createMarkup(images){\n \nconst imageGallary = images\n.map(function({webformatURL, largeImageURL, tags, likes, views, comments, downloads})\n    { return(`  <li class=\"gallery-item\">\n   <a href=\"${largeImageURL}\">\n     <img \n         class=\"gallery-image\"\n         src=\"${webformatURL}\" alt =\"${tags}\"/>\n     </a>\n   <ul class=\"info-box\">\n     <li class=\"image-info\">\n       <p class=\"info-name\">Likes</p>\n       <p class=\"info-value\">${likes}</p>\n     </li>\n     <li class=\"image-info\">\n       <p class=\"info-name\">Views</p>\n       <p class=\"info-value\">${views}</p>\n     </li>\n     <li class=\"image-info\">\n       <p class=\"info-name\">Comments</p>\n       <p class=\"info-value\">${comments}</p>\n     </li>\n     <li class=\"image-info\">\n       <p class=\"info-name\">Downloads</p>\n       <p class=\"info-value\">${downloads}</p>\n     </li>\n   </ul>\n   </li>\n`)\n})\n  .join(``);\n  \nreturn imageGallary\n}\n\nfunction resetMarkup(string){\n    gallery.innerHTML= string;\n}\n\nfunction addMarkupNew(string){\n  gallery.insertAdjacentHTML(\"beforeend\", string)\n}","import axios from \"axios\";\n\n\n//  function for HTTP requests.\n\nexport default async function fetchPhotos(search,page){\nconst response = await axios.get(\"https://pixabay.com/api/\", {\n\tparams: {\n    key :\"42747257-6cb1908b03b224c2fc7af7612\",\n    q: search,\n    image_type: \"photo\",\n    orientation:\"horizontal\",\n    safesearch:true,\n    page: page,\n    per_page: 15\n\t}\n    })\n    return  response.data\n  }","export default \"__VITE_ASSET__8479b7dd__\"","import { createMarkup, resetMarkup, addMarkupNew } from './js/render-functions';\nimport fetchPhotos from './js/pixabay-api';\nimport errorSvg from './img/error.svg';\nimport iziToast from 'izitoast';\nimport simpleLightbox from 'simplelightbox';\n\nconst form = document.querySelector('form');\nconst loader = document.querySelector('.container');\nconst loadMoreBtn = document.querySelector('.load-button');\nconst galleryLook = new simpleLightbox('.gallery a');\n\nloadMoreBtn.addEventListener('click', clickHandler);\nform.addEventListener('submit', submitHandler);\n\nlet page;\nlet searchPrase;\n\n\nfunction submitHandler(event) {\n    event.preventDefault();\n    loadMoreBtn.classList.add('is-hidden');\n    resetMarkup(' ');\n    let inputPrase = event.currentTarget.elements.search.value;\n    if (inputPrase.trim() === '') {\n      const note = 'Empty input';\n      invokeNotification(note);\n    } else {\n      searchPrase = inputPrase;\n      page = 1;\n      fetchAndRender();\n      loader.classList.remove('is-hidden');\n      form.reset();\n    }\n  }\n// function submitHandler(event) {\n//   event.preventDefault();\n//   loadMoreBtn.classList.add('is-hidden');\n//   resetMarkup(' ');\n//   let inputPrase = event.currentTarget.elements.search.value;\n//   if (inputPrase.trim() === '') {\n//     const note = 'Empty input';\n//     invokeNotification(note);\n//   } else {\n//     searchPrase = inputPrase;\n//     page = 1;\n//     const photos = fetchPhotos(searchPrase, page);\n//     loader.classList.remove('is-hidden');\n//     totalCheck(photos);\n//     form.reset();\n//   }\n// }\n\nfunction clickHandler() {\n  loadMoreBtn.classList.add('is-hidden');\n  page += 1;\n  fetchAndRender()\n  loader.classList.remove('is-hidden');\n}\n\n// function totalCheck(photosObject) {\n//   photosObject\n//     .then(response => {\n//       const { total, hits } = response;\n//       if (total > 0) {\n//         let imageGallary = createMarkup(hits);\n//         const PER_PAGE = 15;\n//         let maxPage = Math.ceil(total / PER_PAGE);\n//         if (maxPage <= page) {\n//           loadMoreBtn.classList.add('is-hidden');\n//           let note =\n//             \"We're sorry, but you've reached the end of search results.\";\n//           invokeNotification(note);\n//         } else {\n//           loadMoreBtn.classList.remove('is-hidden');\n//         }\n//         addMarkupNew(imageGallary);\n//         scrollToPage();\n//         galleryLook.refresh();\n//       } else {\n//         const note =\n//           'Sorry, there are no images matching your search query. Please try again!';\n//         const startMarkup = `<li><span class=\"loader-css\"></span></li>`;\n//         resetMarkup(startMarkup);\n//         invokeNotification(note);\n//       }\n//     })\n//     .catch(error => {\n//       let note = error;\n//       invokeNotification(note);\n//     })\n//     .finally(() => loader.classList.add('is-hidden'));\n// }\n\nasync function fetchAndRender() {\n    try {\n      const photos = await fetchPhotos(searchPrase, page);\n      const { total, hits } = photos;\n      console.log(total, hits);\n      totalCheck(total, hits);\n    } catch {\n      let note = \"upload error\";\n      invokeNotification(note);\n    } finally {\n      loader.classList.add('is-hidden');\n    }\n  }\n\nfunction totalCheck(total,hits) {\n    console.log(\"Total check total hits\", total, hits)\n  if (total > 0) {\n    let imageGallary = createMarkup(hits);\n    addMarkupNew(imageGallary);\n    scrollToPage();\n    buttonBehavior(total)\n    galleryLook.refresh();\n  } else {\n    const note =\n      'Sorry, there are no images matching your search query. Please try again!';\n    const startMarkup = `<li><span class=\"loader-css\"></span></li>`;\n    resetMarkup(startMarkup);\n    invokeNotification(note);\n  }\n}\n\n\n\nfunction buttonBehavior(total){\n    const PER_PAGE = 15;\n    let maxPage = Math.ceil(total / PER_PAGE);\n    if (maxPage <= page) {\n      loadMoreBtn.classList.add('is-hidden');\n      let note = \"We're sorry, but you've reached the end of search results.\";\n      invokeNotification(note);\n    } else {\n      loadMoreBtn.classList.remove('is-hidden');\n    }\n}\n\nfunction invokeNotification(message) {\n    iziToast.error({\n      timeout: '5000',\n      messageColor: '#ffffff',\n      titleColor: '#fff',\n      titleSize: '16',\n      titleLineHeight: '24',\n      message: message,\n      iconUrl: errorSvg,\n      iconColor: '#fff',\n      backgroundColor: '#EF4040',\n      progressBarColor: '#B51B1B',\n      position: 'topRight',\n      messageSize: '16',\n      messageLineHeight: '24',\n      maxWidth: '432px',\n    });\n  }\n  \n  \n\nfunction scrollToPage() {\n    const galleryItem = document.querySelector('.gallery-item');\n    let galleryItemSize = galleryItem.getBoundingClientRect();\n    window.scrollBy({\n      top: 2 * galleryItemSize.height,\n      behavior: 'smooth',\n    });\n  }"],"names":["gallery","createMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","resetMarkup","string","addMarkupNew","fetchPhotos","search","page","axios","errorSvg","form","loader","loadMoreBtn","galleryLook","simpleLightbox","clickHandler","submitHandler","searchPrase","event","inputPrase","invokeNotification","fetchAndRender","photos","total","hits","totalCheck","imageGallary","scrollToPage","buttonBehavior","note","message","iziToast","galleryItemSize"],"mappings":"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"}