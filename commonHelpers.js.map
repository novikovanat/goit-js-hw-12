{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/img/error.svg","../src/main.js"],"sourcesContent":["// function for render pictures\nexport { createMarkup, resetMarkup, addMarkupNew };\nconst gallery = document.querySelector('.gallery');\n\nfunction createMarkup(images){\n \nconst imageGallary = images\n.map(function({webformatURL, largeImageURL, tags, likes, views, comments, downloads})\n    { return(`  <li class=\"gallery-item\">\n   <a href=\"${largeImageURL}\">\n     <img \n         class=\"gallery-image\"\n         src=\"${webformatURL}\" alt =\"${tags}\"/>\n     </a>\n   <ul class=\"info-box\">\n     <li class=\"image-info\">\n       <p class=\"info-name\">Likes</p>\n       <p class=\"info-value\">${likes}</p>\n     </li>\n     <li class=\"image-info\">\n       <p class=\"info-name\">Views</p>\n       <p class=\"info-value\">${views}</p>\n     </li>\n     <li class=\"image-info\">\n       <p class=\"info-name\">Comments</p>\n       <p class=\"info-value\">${comments}</p>\n     </li>\n     <li class=\"image-info\">\n       <p class=\"info-name\">Downloads</p>\n       <p class=\"info-value\">${downloads}</p>\n     </li>\n   </ul>\n   </li>\n`)\n})\n  .join(``);\n  \nreturn imageGallary\n}\n\nfunction resetMarkup(string){\n    gallery.innerHTML= string;\n}\n\nfunction addMarkupNew(string){\n  gallery.insertAdjacentHTML(\"beforeend\", string)\n}","import axios from \"axios\";\n\n\n//  function for HTTP requests.\n\nexport default async function fetchPhotos(search,page){\nconst response = await axios.get(\"https://pixabay.com/api/\", {\n\tparams: {\n    key :\"42747257-6cb1908b03b224c2fc7af7612\",\n    q: search,\n    image_type: \"photo\",\n    orientation:\"horizontal\",\n    safesearch:true,\n    page: page,\n    per_page: 15\n\t}\n    })\n    return  response.data\n  }","export default \"__VITE_ASSET__8479b7dd__\"","import {createMarkup, resetMarkup, addMarkupNew} from \"./js/render-functions\";\nimport fetchPhotos from \"./js/pixabay-api\";\nimport errorSvg from './img/error.svg'\nimport iziToast from 'izitoast';\nimport simpleLightbox from \"simplelightbox\";\n\n\nconst form = document.querySelector('form')\nconst loader = document.querySelector('.container')\nconst loadMoreBtn =document.querySelector('.load-button')\nconst galleryLook = new simpleLightbox('.gallery a')\n\nloadMoreBtn.addEventListener(\"click\", clickHandler)\nform.addEventListener(\"submit\", submitHandler)\n\nlet page;\nlet searchPrase;\n\nfunction scrollToPage() {\n    const galleryItem = document.querySelector('.gallery-item')\n    let galleryItemSize = galleryItem.getBoundingClientRect();\n    console.log(\"gallery-item-size\",galleryItemSize)\n    window.scrollBy({\n        top: 2* galleryItemSize.height,\n        behavior: \"smooth\",\n      });\n}\n\nfunction submitHandler(event){\n    event.preventDefault()\n    loadMoreBtn.classList.add('is-hidden')\n    resetMarkup(\" \")\n    let inputPrase = event.currentTarget.elements.search.value;\n    if (inputPrase.trim() === '')\n    {\n        const note = \"Empty input\"\n        invokeNotification(note)\n        }\n    else {\n        searchPrase = inputPrase;\n        page = 1;\n        const photos = fetchPhotos(searchPrase, page);\n        loader.classList.remove(\"is-hidden\")\n        totalCheck(photos)\n    form.reset()\n}}\n\n\n function clickHandler(){\n    loadMoreBtn.classList.add('is-hidden')\n        page+=1;\n        const photos = fetchPhotos(searchPrase, page)\n        loader.classList.remove(\"is-hidden\")\n        totalCheck(photos)\n      }\n    \n \n\nfunction totalCheck(photosObject){\n    photosObject.then((response) => {\n        const {total, hits} = response\n    if (total>0){\n        let imageGallary = createMarkup(hits)\n        let maxPage = Math.ceil(total/15)\n          if (maxPage <= page){\n            loadMoreBtn.classList.add('is-hidden')\n            let note = \"We're sorry, there are no more posts to load\"\n            invokeNotification(note)\n        }\n          else{ \n            scrollToPage\n            setTimeout(() => { loadMoreBtn.classList.remove('is-hidden')\n\t\n}, 3000);\n            \n        }\n        addMarkupNew(imageGallary);\n        scrollToPage()\n        galleryLook.refresh()\n       } \n           else{\n       const note = \"Sorry, there are no images matching your search query. Please try again!\"\n       const startMarkup = `<li><span class=\"loader-css\"></span></li>`;\n       resetMarkup(startMarkup);\n       invokeNotification(note)\n       }\n    loader.classList.add(\"is-hidden\")\n})\n.catch((error) => console.log(error));\n}\n\nfunction invokeNotification(message){\n    (iziToast.error({\n        timeout:'5000',\n        messageColor:'#ffffff',\n        titleColor:\"#fff\",\n        titleSize:\"16\",\n        titleLineHeight:'24',\n        message: message,\n        iconUrl: errorSvg,\n        iconColor:'#fff',\n        backgroundColor:'#EF4040',\n        progressBarColor:\"#B51B1B\",\n        position:'topRight',\n        messageSize:'16',\n        messageLineHeight:'24',\n        maxWidth:'432px'\n    }));\n}\n\n \n"],"names":["gallery","createMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","resetMarkup","string","addMarkupNew","fetchPhotos","search","page","axios","errorSvg","form","loader","loadMoreBtn","galleryLook","simpleLightbox","clickHandler","submitHandler","searchPrase","scrollToPage","galleryItemSize","event","inputPrase","invokeNotification","photos","totalCheck","photosObject","response","total","hits","imageGallary","note","error","message","iziToast"],"mappings":"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"}